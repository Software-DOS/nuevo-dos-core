<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- <title>Gestión de Hojas de Vida</title>
  <link rel="stylesheet" href="styles/main.css"> -->
  <script src="https://alcdn.msauth.net/browser/2.32.1/js/msal-browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- <script src="js/auth.js"></script> -->
</head>
    
<body>
  <script>
    // Verificar autenticación antes de mostrar contenido
    window.addEventListener("load", verificarAutenticacion);
  </script>

  <!-- Navbar -->
  <!-- <nav class="navbar" id="navbar">
    <div class="logo">
      <img src="assets/images/logo.png" alt="Logo DOS" class="logo-img">
    </div>
    <div class="nav-links">
        <a href="dashboard.html" class="fas fa-bell"></a>
        <a href="dashboard.html" class="active">Inicio</a>
        <a href="lista_empleados.html">Perfiles</a>
        <a href="lista_capacitaciones.html">Capacitaciones</a>
        <a href="lista_evaluaciones.html">Evaluaciones</a>
        <a href="empleado_cv.html">Ver Mi Perfil</a>
        <button id="logoutButton" class="nav-button" onclick="cerrarSesion()">Cerrar Sesión</button>
        <div class="profile-dropdown">
            <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="profile-avatar" onclick="toggleDropdown()">
            <div class="dropdown-menu" id="profileMenu">
                <a href="lista_empleados.html"><i class="fas fa-users"></i> Ver Perfiles</a>
                <a href="lista_capacitaciones.html"><i class="fas fa-chalkboard-teacher"></i> Capacitaciones</a>
                <a href="lista_capacitaciones.html"><i class="fas fa-clipboard-check"></i>Evaluaciones</a>
                <a href="empleado_cv.html"><i class="fas fa-user-circle"></i> Ver Mi Perfil</a>
            </div>
        </div>
    </div>
  </nav> -->

  <!-- Tarjeta del Empleado -->
  <div class="employee-card relative">
    <div class="employee-image-container">
      <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Foto del Empleado" class="employee-image" id="employeeImage">
      <label for="photoUpload" class="edit-icon-center">
        <i class="fas fa-pen"></i>
      </label>
      <input type="file" id="photoUpload" accept="image/*" class="hidden" onchange="previewImage(event)">
    </div>
    
    
    <div class="employee-personal-info">
      <h1><p class="info-item"><input type="text" value="Juan Carlos Rodríguez Martínez" class="value" disabled></p></h1>
      <div class="info-item">
        <a href="mailto:juan.rodriguez@empresa.com">✉️ <input type="text" value="juan.rodriguez@empresa.com" class="value" disabled></a>
      </div>
      <p class="info-item"><input type="text" value="Analista de Sistemas" class="value" disabled></p>
      <p class="info-item"><input type="text" value="Tecnología de la Información" class="value" disabled></p>
      <p class="info-item"><input type="text" value="Desarrollo de Aplicaciones" class="value" disabled></p>
    </div>
    <!-- Botón de editar (con ícono de lápiz) posicionado en la esquina superior derecha -->
    <div class="edit-section">
      <button id="editButton" class="edit-toggle-btn" onclick="toggleEdit()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.0001 1.0001 0 0 0 0-1.41l-2.34-2.34a1.0001 1.0001 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Sección Principal -->
  <div class="main-section">
    <!-- Nueva barra lateral con solo dos categorías -->
    <div class="category-index">
      <ul>
        <li><div class="category-link" data-target="datos-personales">Datos Personales</div></li>
        <li><div class="category-link" data-target="info-profesional">Información Profesional</div></li>
      </ul>
    </div>
    <div class="content-area">
      <!-- Sección Datos Personales: se agrupan Bibliografía, Info Personal, Contacto, Emergencia, Familiares y Documentos -->
      <div id="datos-personales" class="content-section">
        <h2>Datos Personales</h2>

        <section>
          <h3>Bibliografía</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Fecha de Nacimiento:</span>
              <input type="date" class="value" value="1985-03-15" disabled>
            </div>
            <div class="info-item">
              <span class="label">País de Nacimiento:</span>
              <input type="text" class="value" value="España" disabled>
            </div>
            <div class="info-item">
              <span class="label">Provincia:</span>
              <input type="text" class="value" value="Madrid" disabled>
            </div>
            <div class="info-item">
              <span class="label">Ciudad:</span>
              <input type="text" class="value" value="Madrid" disabled>
            </div>
          </div>
        </section>

        <section>
          <h3>Información Personal</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Nombres:</span>
              <input type="text" class="value" value="Juan Carlos" disabled>
            </div>
            <div class="info-item">
              <span class="label">Apellidos:</span>
              <input type="text" class="value" value="Rodríguez Martínez" disabled>
            </div>
            <div class="info-item">
              <span class="label">Sexo:</span>
              <input type="text" class="value" value="Masculino" disabled>
            </div>
            <div class="info-item">
              <span class="label">Estado Civil:</span>
              <input type="text" class="value" value="Casado" disabled>
            </div>
            <div class="info-item">
              <span class="label">Tipo de Sangre:</span>
              <input type="text" class="value" value="O+" disabled>
            </div>
            <div class="info-item">
              <span class="label">Último Nivel de Estudio:</span>
              <input type="text" class="value" value="Máster" disabled>
            </div>
            <div class="info-item">
              <span class="label">Cargas Familiares:</span>
              <input type="number" class="value" value="2" disabled>
            </div>
          </div>
        </section>

        <section>
          <h3>Contacto y Dirección</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Correo Institucional:</span>
              <input type="email" class="value" value="juan.rodriguez@empresa.com" disabled>
            </div>
            <div class="info-item">
              <span class="label">Correo Personal:</span>
              <input type="email" class="value" value="juanc.rodriguez@gmail.com" disabled>
            </div>
            <div class="info-item">
              <span class="label">Número Celular:</span>
              <input type="text" class="value" value="+34 612 345 678" disabled>
            </div>
            <div class="info-item">
              <span class="label">Dirección Domiciliaria:</span>
              <input type="text" class="value" value="Calle Serrano 123, 28006 Madrid" disabled>
            </div>
          </div>
        </section>

        <section>
          <h3>Contacto de Emergencia</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Nombre:</span>
              <input type="text" class="value" value="Ana Martínez López" disabled>
            </div>
            <div class="info-item">
              <span class="label">Relación:</span>
              <input type="text" class="value" value="Esposa" disabled>
            </div>
            <div class="info-item">
              <span class="label">Teléfono:</span>
              <input type="text" class="value" value="+34 623 456 789" disabled>
            </div>
          </div>
        </section>

        <section>
          <h3>Familiares</h3>
          <div class="subsection">
            <h4>Información Conyugal</h4>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Estado:</span>
                <input type="text" class="value" value="Casado" disabled>
              </div>
              <div class="info-item">
                <span class="label">Nombre del Cónyuge:</span>
                <input type="text" class="value" value="Ana Martínez López" disabled>
              </div>
              <div class="info-item">
                <span class="label">Fecha de Matrimonio:</span>
                <input type="date" class="value" value="2015-06-10" disabled>
              </div>
              <div class="info-item">
                <span class="label">Discapacidad:</span>
                <input type="text" class="value" value="No" disabled>
              </div>
              <div class="info-item">
                <span class="label">Documentos:</span>
                <input type="text" class="value document-placeholder" value="Archivos Adjuntos" disabled>
              </div>
            </div>
          </div>
          <div class="subsection">
            <h4>Dependientes</h4>
            <div class="dependents-list">
              <div class="dependent-item">
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Nombre:</span>
                    <input type="text" class="value" value="Carlos Rodríguez Martínez" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Fecha de Nacimiento:</span>
                    <input type="date" class="value" value="2016-05-05" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Discapacidad:</span>
                    <input type="text" class="value" value="No" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Documentos:</span>
                    <input type="text" class="value document-placeholder" value="Archivos Adjuntos" disabled>
                  </div>
                </div>
              </div>
              <!-- Aquí se agregarán los dependientes -->
            </div>
            <div class="add-dependent mt-2">
              <button id="addDependentButton" class="nav-button" onclick="toggleAddDependentForm()">Añadir Dependiente</button>
            </div>
            <div id="addDependentForm" class="hidden mt-2">
              <h4>Nuevo Dependiente</h4>
              <div class="info-grid">
                <div class="info-item">
                  <span class="label">Nombre:</span>
                  <input type="text" id="newDependentName" class="value">
                </div>
                <div class="info-item">
                  <span class="label">Fecha de Nacimiento:</span>
                  <input type="date" id="newDependentBirthdate" class="value">
                </div>
                <div class="info-item">
                  <span class="label">Discapacidad:</span>
                  <input type="text" id="newDependentDisability" class="value">
                </div>
                <div class="info-item">
                  <span class="label">Adjuntar PDF:</span>
                  <input type="file" id="dependentDocumentFile" accept="application/pdf" class="value">
                </div>
              </div>
              <button class="nav-button" onclick="addDependent()">Guardar Dependiente</button>
            </div>
          </div>
        </section>
          <section>
            <h3>Documentos de Identidad</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Número de Cédula:</span>
                <input type="text" class="value" value="12345678A" disabled>
              </div>
              <div class="info-item">
                <span class="label">Documento:</span>
                <input type="text" class="value document-placeholder" value="Archivos Adjuntos" disabled>
              </div>
              <div id="documentUpload" class="info-item hidden">
                <span class="label">Adjuntar PDF:</span>
                <input type="file" id="documentFile" accept="application/pdf" class="value">
              </div>
            </div>
          </section>          
      </div>

      <!-- Sección Información Profesional: se agrupan Empleo, Historia, Formación, Idiomas y Proyectos -->
      <div id="info-profesional" class="content-section">
        <h2>Información Profesional</h2>

        <section>
          <h3>Información de Empleo</h3>
          <div class="subcategory-nav">
            <div class="subcategory-link active" data-subtarget="info-organizacional">Información Organizacional</div>
            <div class="subcategory-link" data-subtarget="info-plaza">Información de Plaza</div>
            <div class="subcategory-link" data-subtarget="organigrama">Organigrama</div>
          </div>
          <div class="subcategory-content">
            <div id="info-organizacional" class="subcategory-section active">
              <div class="info-grid">
                <div class="info-item">
                  <span class="label">Cargo:</span>
                  <input type="text" class="value" value="Analista de Sistemas" disabled>
                </div>
                <div class="info-item">
                  <span class="label">Fecha de Inicio:</span>
                  <input type="date" class="value" value="2020-01-01" disabled>
                </div>
                <div class="info-item">
                  <span class="label">Empresa:</span>
                  <input type="text" class="value" value="Tecnología Innovadora S.A." disabled>
                </div>
                <div class="info-item">
                  <span class="label">Área:</span>
                  <input type="text" class="value" value="Tecnología de la Información" disabled>
                </div>
                <div class="info-item">
                  <span class="label">Subárea:</span>
                  <input type="text" class="value" value="Desarrollo de Aplicaciones" disabled>
                </div>
              </div>
            </div>
            <div id="info-plaza" class="subcategory-section">
              <div class="info-grid">
                <div class="info-item">
                  <span class="label">Jefe Directo:</span>
                  <input type="text" class="value" value="María Sánchez" disabled>
                </div>
                <div class="info-item">
                  <span class="label">Tipo de Contrato:</span>
                  <input type="text" class="value" value="Indefinido" disabled>
                </div>
                <div class="info-item">
                  <span class="label">Ubicación:</span>
                  <input type="text" class="value" value="Sede Central Madrid" disabled>
                </div>
              </div>
            </div>
            <div id="organigrama" class="subcategory-section">
              <div class="organigrama-visual">
                <div class="org-nivel">
                  <div class="org-box jefe">
                    <div class="org-avatar">MS</div>
                    <div class="org-info">
                      <h4><input type="text" value="María Sánchez" class="value" disabled></h4>
                      <p><input type="text" value="Gerente de Desarrollo" class="value" disabled></p>
                    </div>
                  </div>
                </div>
                <div class="org-conector">
                  <div class="org-linea-vertical"></div>
                </div>
                <div class="org-nivel">
                  <div class="org-box empleado">
                    <div class="org-avatar">JR</div>
                    <div class="org-info">
                      <h4><input type="text" value="Juan C. Rodríguez" class="value" disabled></h4>
                      <p><input type="text" value="Analista de Sistemas" class="value" disabled></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Sección Historia Laboral -->
        <section class="job-history-section">
            <h3>Historia Laboral</h3>
            <div class="info-grid">
            <div class="info-item">
                <h3><input type="text" value="Desarrollador Senior" class="value" disabled></h3>
                <p class="company"><input type="text" value="Software Solutions Inc." class="value" disabled></p>
                <p class="dates"><input type="text" value="2018 - 2019" class="value" disabled></p>
                <p class="functions"><input type="text" value="Desarrollo de aplicaciones web empresariales, liderazgo de equipo técnico" class="value" disabled></p>
            </div>
            <div class="info-item">
                <h3><input type="text" value="Desarrollador Full Stack" class="value" disabled></h3>
                <p class="company"><input type="text" value="Tech Innovations Ltd." class="value" disabled></p>
                <p class="dates"><input type="text" value="2016 - 2018" class="value" disabled></p>
                <p class="functions"><input type="text" value="Desarrollo full stack, implementación de APIs RESTful" class="value" disabled></p>
            </div>
            <div class="info-item">
                <h3><input type="text" value="Desarrollador Junior" class="value" disabled></h3>
                <p class="company"><input type="text" value="Digital Systems Corp." class="value" disabled></p>
                <p class="dates"><input type="text" value="2014 - 2016" class="value" disabled></p>
                <p class="functions"><input type="text" value="Mantenimiento de aplicaciones web, desarrollo frontend" class="value" disabled></p>
            </div>
            </div>
        </section>
  
        <!-- Formación académica -->
        <section>
          <h3>Formación Académica</h3>
          <div class="subcategory-nav">
            <div class="subcategory-link active" data-subtarget="estudios">Estudios</div>
            <div class="subcategory-link" data-subtarget="certificaciones">Especialidades y Certificaciones</div>
          </div>
          <div class="subcategory-content">
            <div id="estudios" class="subcategory-section active">
              <div class="education-item">
                <h4>Título de Tercer Nivel</h4>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Carrera:</span>
                    <input type="text" value="Ingeniería en Sistemas Informáticos" class="value" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Institución:</span>
                    <input type="text" value="Universidad Politécnica de Madrid" class="value" disabled>
                  </div>
                </div>
              </div>
              <div class="education-item">
                <h4>Títulos de Cuarto Nivel</h4>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Master:</span>
                    <input type="text" value="Máster en Desarrollo de Software" class="value" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Institución:</span>
                    <input type="text" value="ESIC Business School" class="value" disabled>
                  </div>
                </div>
              </div>
              <div class="add-education mt-2">
                <button id="addEducationButton" class="nav-button" onclick="toggleAddEducationForm()">Añadir Estudio</button>
              </div>
              <div id="addEducationForm" class="hidden mt-2">
                <h3>Nuevo Estudio</h3>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Nivel del titulo:</span>
                    <input type="text" id="newEducationCareer" class="value">
                  </div>
                  <div class="info-item">
                    <span class="label">Carrera:</span>
                    <input type="text" id="newEducationCareer" class="value">
                  </div>
                  <div class="info-item">
                    <span class="label">Institución:</span>
                    <input type="text" id="newEducationInstitution" class="value">
                  </div>
                </div>
                <button class="nav-button" onclick="addEducation()">Guardar Estudio</button>
              </div>
            </div>
            <div id="certificaciones" class="subcategory-section">
              <div class="certification-item">
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Título:</span>
                    <input type="text" class="value" value="Certificación AWS Solutions Architect" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Institución:</span>
                    <input type="text" class="value" value="Amazon Web Services" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Fecha:</span>
                    <input type="text" class="value" value="2022" disabled>
                  </div>
                  <div class="info-item">
                    <span class="label">Certificado:</span>
                    <input type="text" class="value document-placeholder" value="Archivos Adjuntos" disabled>
                  </div>
                </div>
              </div>
              <div class="add-certification mt-2">
                <button id="addCertificationButton" class="nav-button" onclick="toggleAddCertificationForm()">Añadir Certificación</button>
              </div>
              <div id="addCertificationForm" class="hidden mt-2">
                <h3>Nueva Certificación</h3>
                <div class="info-grid">
                  <div class="info-item">
                    <span class="label">Título:</span>
                    <input type="text" id="newCertificationTitle" class="value">
                  </div>
                  <div class="info-item">
                    <span class="label">Institución:</span>
                    <input type="text" id="newCertificationInstitution" class="value">
                  </div>
                  <div class="info-item">
                    <span class="label">Fecha:</span>
                    <input type="text" id="newCertificationDate" class="value">
                  </div>
                </div>
                <button class="nav-button" onclick="addCertification()">Guardar Certificación</button>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3>Idiomas</h3>
          <div class="language-item">
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Idioma:</span>
                <input type="text" class="value" value="Inglés" disabled>
              </div>
              <div class="info-item">
                <span class="label">Nivel:</span>
                <input type="text" class="value" value="Avanzado" disabled>
              </div>
              <div class="info-item">
                <span class="label">Certificación:</span>
                <input type="text" class="value document-placeholder" value="Archivos Adjuntos" disabled>
              </div>
            </div>
          </div>
          <div class="add-language mt-2">
            <button id="addLanguageButton" class="nav-button" onclick="toggleAddLanguageForm()">Añadir Idioma</button>
          </div>
          <div id="addLanguageForm" class="hidden mt-2">
            <h3>Nuevo Idioma</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Idioma:</span>
                <input type="text" id="newLanguage" class="value">
              </div>
              <div class="info-item">
                <span class="label">Nivel:</span>
                <input type="text" id="newLanguageLevel" class="value">
              </div>
              <div class="info-item">
                <span class="label">Certificación:</span>
                <input type="text" id="newLanguageCertification" class="value">
              </div>
            </div>
            <button class="nav-button" onclick="addLanguage()">Guardar Idioma</button>
          </div>
        </section>

        <section>
          <h3>Proyectos</h3>
          <div class="project-item">
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Título:</span>
                <input type="text" class="value" value="Sistema de Gestión Empresarial" disabled>
              </div>
              <div class="info-item">
                <span class="label">Especialidad:</span>
                <input type="text" class="value" value="Desarrollo Full Stack" disabled>
              </div>
              <div class="info-item">
                <span class="label">Año:</span>
                <input type="text" class="value" value="2022" disabled>
              </div>
            </div>
          </div>
          <div id="addLanguageForm" class="mt-2">
            <button id="addProjectButton" class="nav-button" onclick="toggleAddProjectForm()">Añadir Proyecto</button>
          </div>
          <div id="addProjectForm" class="hidden">
            <h3>Nuevo Proyecto</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Título:</span>
                <input type="text" id="newProjectTitle" class="value">
              </div>
              <div class="info-item">
                <span class="label">Especialidad:</span>
                <input type="text" id="newProjectSpecialty" class="value">
              </div>
              <div class="info-item">
                <span class="label">Año:</span>
                <input type="text" id="newProjectYear" class="value">
              </div>
            </div>
            <button class="nav-button" onclick="addProject()">Guardar Proyecto</button>
          </div>
        </section>

      </div>
    </div>
  </div>

  <a href="#" class="back-to-top">↑</a>
  <script>
    // Función para mostrar sección
    function showSection(targetId) {
      // Ocultar todas las secciones principales
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      // Resetear estilo de todos los links
      document.querySelectorAll('.category-link').forEach(link => {
        link.classList.remove('selected');
      });
      // Mostrar la sección seleccionada
      const targetSection = document.getElementById(targetId);
      targetSection.classList.add('active');
      // Marcar link seleccionado
      const selectedLink = document.querySelector(`.category-link[data-target="${targetId}"]`);
      if(selectedLink) {
        selectedLink.classList.add('selected');
      }
    }

    // Inicialmente mostrar la primera sección
    document.addEventListener('DOMContentLoaded', () => {
      showSection('datos-personales');
    });

    // Añadir evento a los links de categoría
    document.querySelectorAll('.category-link').forEach(link => {
      link.addEventListener('click', function() {
        const targetId = this.getAttribute('data-target');
        showSection(targetId);
      });
    });

    // Funciones de subcategorías (se mantienen para la sección de Información Profesional)
    function showSubcategory(targetId) {
      const section = document.querySelector(`#${targetId}`).closest('.content-section');
      section.querySelectorAll('.subcategory-section').forEach(subsection => {
        subsection.classList.remove('active');
      });
      section.querySelectorAll('.subcategory-link').forEach(link => {
        link.classList.remove('active');
      });
      const targetSubsection = document.getElementById(targetId);
      targetSubsection.classList.add('active');
      const selectedLink = section.querySelector(`.subcategory-link[data-subtarget="${targetId}"]`);
      selectedLink.classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.subcategory-link').forEach(link => {
        link.addEventListener('click', function() {
          const targetId = this.getAttribute('data-subtarget');
          showSubcategory(targetId);
        });
      });
    });

    function toggleEdit() {
      const inputs = document.querySelectorAll('.value');
      const isEditing = inputs[0].disabled;
      inputs.forEach(input => {
        input.disabled = !isEditing;
      });
    }

        function toggleAddProjectForm() {
            const form = document.getElementById('addProjectForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Proyecto
        function addProject() {
          const title = document.getElementById('newProjectTitle').value.trim();
          const specialty = document.getElementById('newProjectSpecialty').value.trim();
          const year = document.getElementById('newProjectYear').value.trim();

          if (!title || !specialty || !year) {
            Swal.fire({
              title: 'Campos incompletos',
              text: 'Por favor completa todos los campos del proyecto antes de guardar.',
              icon: 'warning',
              confirmButtonText: 'Ok'
            });
            return;
          }

          Swal.fire({
            title: 'Proyecto añadido',
            html: `<strong>${title}</strong><br>Especialidad: ${specialty}<br>Año: ${year}`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
          });

          // Limpiar campos
          document.getElementById('newProjectTitle').value = '';
          document.getElementById('newProjectSpecialty').value = '';
          document.getElementById('newProjectYear').value = '';
          toggleAddProjectForm();
        }

        function toggleAddLanguageForm() {
            const form = document.getElementById('addLanguageForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Idioma
        function addLanguage() {
          const language = document.getElementById('newLanguage').value.trim();
          const level = document.getElementById('newLanguageLevel').value.trim();
          const certification = document.getElementById('newLanguageCertification').value.trim();

          if (!language || !level || !certification) {
            Swal.fire({
              title: 'Campos incompletos',
              text: 'Por favor completa todos los campos del idioma antes de guardar.',
              icon: 'warning',
              confirmButtonText: 'Ok'
            });
            return;
          }

          Swal.fire({
            title: 'Idioma añadido',
            html: `<strong>${language}</strong><br>Nivel: ${level}<br>Certificación: ${certification}`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
          });

          document.getElementById('newLanguage').value = '';
          document.getElementById('newLanguageLevel').value = '';
          document.getElementById('newLanguageCertification').value = '';
          toggleAddLanguageForm();
        }

        function toggleAddEducationForm() {
            const form = document.getElementById('addEducationForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Educación
        function addEducation() {
          const career = document.getElementById('newEducationCareer').value.trim();
          const institution = document.getElementById('newEducationInstitution').value.trim();

          if (!career || !institution) {
            Swal.fire({
              title: 'Campos incompletos',
              text: 'Por favor completa todos los campos del estudio antes de guardar.',
              icon: 'warning',
              confirmButtonText: 'Ok'
            });
            return;
          }

          Swal.fire({
            title: 'Estudio añadido',
            html: `<strong>${career}</strong><br>Institución: ${institution}`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
          });

          document.getElementById('newEducationCareer').value = '';
          document.getElementById('newEducationInstitution').value = '';
          toggleAddEducationForm();
        }

        function toggleAddCertificationForm() {
            const form = document.getElementById('addCertificationForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Certificación
        function addCertification() {
          const title = document.getElementById('newCertificationTitle').value.trim();
          const institution = document.getElementById('newCertificationInstitution').value.trim();
          const date = document.getElementById('newCertificationDate').value.trim();

          if (!title || !institution || !date) {
            Swal.fire({
              title: 'Campos incompletos',
              text: 'Por favor completa todos los campos de la certificación antes de guardar.',
              icon: 'warning',
              confirmButtonText: 'Ok'
            });
            return;
          }

          Swal.fire({
            title: 'Certificación añadida',
            html: `<strong>${title}</strong><br>Institución: ${institution}<br>Fecha: ${date}`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
          });

          document.getElementById('newCertificationTitle').value = '';
          document.getElementById('newCertificationInstitution').value = '';
          document.getElementById('newCertificationDate').value = '';
          toggleAddCertificationForm();
        }

        function toggleAddDependentForm() {
            const form = document.getElementById('addDependentForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        // Dependiente
        function addDependent() {
          const name = document.getElementById('newDependentName').value.trim();
          const birthdate = document.getElementById('newDependentBirthdate').value.trim();
          const disability = document.getElementById('newDependentDisability').value.trim();

          if (!name || !birthdate || !disability) {
            Swal.fire({
              title: 'Campos incompletos',
              text: 'Por favor completa todos los campos del dependiente antes de guardar.',
              icon: 'warning',
              confirmButtonText: 'Ok'
            });
            return;
          }

          Swal.fire({
            title: 'Dependiente añadido',
            html: `<strong>${name}</strong><br>Fecha de Nacimiento: ${birthdate}<br>Discapacidad: ${disability}`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
          });

          document.getElementById('newDependentName').value = '';
          document.getElementById('newDependentBirthdate').value = '';
          document.getElementById('newDependentDisability').value = '';
          toggleAddDependentForm();
        }

        function previewImage(event) {
            const image = document.getElementById('employeeImage');
            const file = event.target.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                image.src = e.target.result;
            };

            if (file) {
                reader.readAsDataURL(file);
            }
        }
    </script>
    <script type="module">
      import { toggleDropdown } from './js/navbar.js';
      window.toggleDropdown = toggleDropdown; // Necesario para que onclick lo vea como global
  </script>  
    <!-- Dentro de tu <body>, justo antes de la etiqueta de cierre </body> -->
    <footer class="page-footer">
      <button id="attachCVButton" class="nav-button">Adjuntar Hoja de Vida</button>
      <button id="saveChangesButton" class="nav-button">Guardar Cambios</button>
      <button id="printCVButton" class="nav-button">Imprimir CV</button>
    </footer>
    <script>
      document.getElementById("printCVButton").addEventListener("click", () => {
        // Crear iframe oculto
        const iframe = document.createElement("iframe");
        iframe.style.display = "none";
        iframe.src = "exportar_cv.html";
        document.body.appendChild(iframe);
    
        // Esperar que cargue
        iframe.onload = () => {
          iframe.contentWindow.focus();
          iframe.contentWindow.print();
    
          // Limpiar después de un rato
          setTimeout(() => {
            document.body.removeChild(iframe);
          }, 3000);
        };
      });
    </script>   
</body>
</html>